{
"configurations" : [
{
"cluster-env" : {
"security_enabled" : "false",
"smokeuser" : "ambari-qa",
"user_group" : "hadoop"
}
},
{
"mapred-site" : {
"mapreduce.task.io.sort.mb" : "128",
"mapreduce.map.memory.mb" : "512",
"mapreduce.reduce.memory.mb" : "512",
"mapreduce.reduce.java.opts" : "-Xmx512m",
"yarn.app.mapreduce.am.command-opts" : "-Xmx512m",
"mapreduce.map.java.opts" : "-Xmx512m",
"yarn.app.mapreduce.am.resource.mb" : "512"
}
},
{
"hdfs-site" : {
"dfs.ha.automatic-failover.enabled" : "false",
"dfs.namenode.http-address" : "sherpavm:50070",
"dfs.namenode.https-address" : "sherpavm:50470",
"dfs.permissions.superusergroup" : "hdfs"
}
},
{
"yarn-site" : {
"hadoop.registry.rm.enabled" : "false",
"yarn.resourcemanager.ha.enabled" : "false",
"yarn.resourcemanager.webapp.address" : "sherpavm:8088",
"yarn.resourcemanager.recovery.enabled" : "true",
"yarn.log.server.url" : "http://sherpavm:19888/jobhistory/logs",
"yarn.resourcemanager.address" : "sherpavm:8050",
"yarn.timeline-service.address" : "sherpavm:10200",
"yarn.resourcemanager.admin.address" : "sherpavm:8141",
"yarn.resourcemanager.hostname" : "sherpavm",
"yarn.resourcemanager.resource-tracker.address" : "sherpavm:8025",
"yarn.resourcemanager.scheduler.address" : "sherpavm:8030",
"yarn.timeline-service.webapp.address" : "sherpavm:8188",
"yarn.timeline-service.webapp.https.address" : "sherpavm:8190",
"yarn.nodemanager.resource.memory-mb" : "8192",
"yarn.scheduler.minimum-allocation-mb" : "512",
"yarn.scheduler.minimum-allocation-vcores" : "8",
"yarn.scheduler.maximum-allocation-mb" : "1024",
"yarn.nodemanager.vmem-pmem-ratio" : "5"
}
},
{
"hadoop-env" : {
"hadoop_heapsize" : "512",
"dtnode_heapsize" : "256m",
"namenode_opt_newsize" : "128m",
"namenode_heapsize" : "256m",
"namenode_opt_maxpermsize" : "256m",
"nfsgateway_heapsize" : "256",
"namenode_opt_maxnewsize" : "128m",
"namenode_opt_permsize" : "128m"
}
},
{
"yarn-env" : {
"yarn_heapsize" : "256",
"apptimelineserver_heapsize" : "256",
"nodemanager_heapsize" : "400",
"resourcemanager_heapsize" : "256"
}
},
{
"mapred-env" : {
"jobhistory_heapsize" : "256"
}
},
{
"kafka-broker" : {
"zookeeper.connect" : "sherpavm:2182/kafka"
}
},
{
"zoo.cfg" : {
"clientPort" : "2182"
}
},
{
"sparknpi-env" : {
"content" : "\n#!/usr/bin/env bash\n\n# This file is sourced when running various Spark programs.\n# Copy it as spark-env.sh and edit that to configure Spark for your site.\n\n# Options read in YARN client mode\n#SPARK_EXECUTOR_INSTANCES=\"2\" #Number of workers to start (Default: 2)\n#SPARK_EXECUTOR_CORES=\"1\" #Number of cores for the workers (Default: 1).\n#SPARK_EXECUTOR_MEMORY=\"1G\" #Memory per Worker (e.g. 1000M, 2G) (Default: 1G)\n#SPARK_DRIVER_MEMORY=\"512 Mb\" #Memory for Master (e.g. 1000M, 2G) (Default: 512 Mb)\n#SPARK_YARN_APP_NAME=\"spark\" #The name of your application (Default: Spark)\n#SPARK_YARN_QUEUE=\"~@~Xdefault~@~Y\" #The hadoop queue to use for allocation requests (Default: @~Xdefault~@~Y)\n#SPARK_YARN_DIST_FILES=\"\" #Comma separated list of files to be distributed with the job.\n#SPARK_YARN_DIST_ARCHIVES=\"\" #Comma separated list of archives to be distributed with the job.\n\n# Generic options for the daemons used in the standalone deploy mode\n\n# Alternate conf dir. (Default: /conf)\nexport JAVA_HOME={{java_home}}\nexport SPARK_CONF_DIR=${SPARK_HOME:-{{spark_home}}}/conf\n\n# Where log files are stored.(Default:/logs)\n#export SPARK_LOG_DIR=${SPARK_HOME:-{{spark_home}}}/logs\nexport SPARK_LOG_DIR={{spark_log_dir}}\n\n# Where the pid file is stored. (Default: /tmp)\nexport SPARK_PID_DIR={{spark_pid_dir}}\n\n# A string representing this instance of spark.(Default: $USER)\nSPARK_IDENT_STRING=$USER\n\n# The scheduling priority for daemons. (Default: 0)\nSPARK_NICENESS=0\n\nexport SPARK_PUBLIC_DNS={{spark_history_server_host}}\nexport SPARK_HISTORY_OPTS=\"-Xmx256m -Dspark.history.ui.port={{spark_history_ui_port}} -Dspark.history.fs.logDirectory={{spark_eventlog_dir_default}}\"\nexport HIVE_SERVER2_THRIFT_BIND_HOST={{spark_thrift_server_host}}\nexport HIVE_SERVER2_THRIFT_PORT={{spark_thriftserver_port}}\nexport HIVE_SERVER2_THRIFT_OPTS=\"-Xmx256m\"\n\nexport HADOOP_HOME=${HADOOP_HOME:-{{hadoop_home}}}\nexport HADOOP_CONF_DIR=${HADOOP_CONF_DIR:-{{hadoop_conf_dir}}}"
}
}
],
"host_groups": [
{
"name": "MGMT1",
"components": [
{"name": "NODEMANAGER"},
{"name": "HISTORYSERVER"},
{"name": "NAMENODE"},
{"name": "SECONDARY_NAMENODE"},
{"name": "ZOOKEEPER_SERVER"},
{"name": "ZOOKEEPER_CLIENT"},
{"name": "KAFKA_BROKER"},
{"name": "KAFKA_CONNECT"},
{"name": "HDFS_CLIENT"},
{"name": "MAPREDUCE2_CLIENT"},
{"name": "DATANODE"},
{"name": "APP_TIMELINE_SERVER"},
{"name": "YARN_CLIENT"},
{"name": "METRICS_MONITOR"},
{"name": "METRICS_COLLECTOR"},
{"name": "RESOURCEMANAGER"},
{"name": "SPARKNPI_CLIENT"}
],
"configurations" : [ ],
"cardinality": "1"
}
],
"Blueprints": {
"blueprint_name": "qse-1-nodes-42",
"stack_name": "BigInsights",
"stack_version": "4.2.NPI"
}
}
